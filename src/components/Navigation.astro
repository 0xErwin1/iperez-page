---
const pathname = new URL(Astro.request.url).pathname;
---

<nav class="nav">
    <div class="nav-container">
        <a href="/" class={pathname === '/' ? 'active' : ''}>
            <i class="nf nf-md-home nf-lg" aria-hidden="true"></i>
            <span>Home</span>
        </a>
        <a href="/books" class={pathname === '/books' ? 'active' : ''}>
            <i class="nf nf-md-book_open_page_variant nf-lg" aria-hidden="true"></i>
            <span>Books</span>
        </a>
    </div>
</nav>

<script>
    const nav = document.querySelector('.nav');
    let lastScroll = 0;

    if (nav) {
        window.addEventListener('scroll', () => {
            const currentScroll = window.scrollY;
            
            if (currentScroll > 0) {
                nav.classList.add('scrolled');
            } else {
                nav.classList.remove('scrolled');
            }

            lastScroll = currentScroll;
        });
    }
</script>

<style>
    nav {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        z-index: 50;
        background-color: var(--gray-dark);
        border-bottom: 1px solid var(--yellow-mirage);
        height: 3rem;
        display: flex;
        align-items: center;
        transition: all 0.3s ease;
    }

    nav.scrolled {
        background-color: rgba(var(--gray-dark-rgb), 0.8);
        backdrop-filter: blur(8px);
        height: 2.5rem;
    }

    .nav-container {
        max-width: 1000px;
        margin: 0 auto;
        padding: 0 1rem;
        display: flex;
        gap: 2rem;
        height: 100%;
        align-items: center;
    }

    a {
        color: var(--yellow-mirage);
        text-decoration: none;
        font-size: 1.1rem;
        transition: all 0.3s ease;
        height: 100%;
        display: flex;
        align-items: center;
        gap: 0.75rem;
        position: relative;
        padding: 0 0.75rem;
    }

    a:hover {
        color: var(--yellow);
    }

    a.active {
        color: var(--yellow);
    }

    a.active::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 2px;
        background-color: var(--yellow);
    }

    @media (min-width: 640px) {
        .nav-container {
            justify-content: center;
            gap: 3rem;
        }

        a {
            font-size: 1.2rem;
            gap: 0.85rem;
        }
    }

    @media (min-width: 1024px) {
        a {
            font-size: 1.25rem;
            gap: 1rem;
        }
    }

    @media (width <= 720px) {
        .nav-container {
            justify-content: center;
        }
    }
</style> 